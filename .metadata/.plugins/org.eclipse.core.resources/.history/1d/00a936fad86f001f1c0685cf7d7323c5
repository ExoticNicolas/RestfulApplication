package com.SpringBootREST;

public class Password {
	
	import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

import com.SpringBootREST.model.User;
import com.SpringBootREST.repositories.UserRepository;

	@Component
	public class DatabaseInitializer implements CommandLineRunner {
	    
	    @Autowired
	    private UserRepository userRepository;

	    @Autowired
	    private PasswordService passwordService;

	    @Override
	    public void run(String... args) {
	        String username = "admin";
	        String password = "admin123";

	        // Verifica se o usuário já existe
	        if (userRepository.findByUsername(username) == null) {
	            User user = new User();
	            user.setUsername(username);
	            user.setPassword(passwordService.encodePassword(password));

	            userRepository.save(user);
	            System.out.println("User created with username: " + username);
	        } else {
	            System.out.println("User already exists");
	        }
	    }
	}

}
